!function(a){"use strict";var b=[],c=function(){for(var c=j(),f=0;f<b.length;f++)try{var g=b[f],h=g[0],i=g[1],k=h.data("offset.lazy");k.top+h.height()>c.top&&k.top<c.bottom&&(h.removeData("offset.lazy"),i.once&&(b[f]=null),"image"==i.type?!function(a,b){setTimeout(function(){d(a,b)},0)}(h,i):"url"==i.type?!function(a,b){setTimeout(function(){e(a,b)},0)}(h,i):!function(b,c){setTimeout(function(){c.onLoad(c.res(b)),a(window).trigger("scroll.__lazy")},0)}(h,i))}catch(l){}var m=function(a,c){for(var d=[],e=0;e<b.length;e++)c(b[e],e,b)&&d.push(b[e]);return d};b=m(b,function(a){return!!a})},d=function(b,c){var d=c.res(b);b.one({load:function(d){c.onLoad(b,c,d),a(window).trigger("scroll.__lazy")},error:function(d){c.onError(b,c,d),a(window).trigger("scroll.__lazy")}});var e=b.get(0);null!=d&&""!=d?(b.attr("src",d),e.complete||4===e.readyState?b.trigger("load"):"uninitialized"===e.readyState&&0===e.src.indexOf("data:")&&b.trigger("error")):b.trigger("error")},e=function(b,c){a.ajax(c.res(b)).done(function(a){c.onLoad(b,a,c)}).fail(function(a){c.onError(b,a,c)}).always(function(){a(window).trigger("scroll.__lazy")})},f=function(){for(var a=0;a<b.length;a++){var c=b[a];c&&c[0].data("offset.lazy",c[1].offset(c[0]))}},g=function(c,d){if(d||(d={}),!a.isFunction(d.offset))if(d.offset){var e=d.offset;d.offset=function(){return e}}else d.offset=function(a){return a.offset()};if("image"==d.type&&(d.once=!0,d.res||(d.res=c.data("src"))),!a.isFunction(d.res)){var f=d.res;d.res=function(){return f}}c.data("offset.lazy",d.offset(c)),d.onLoad||(d.onLoad=function(){}),d.onError||(d.onError=function(){}),b.push([c,d])},h=function(a){for(var c=0;c<b.length;c++){var d=b[c];if(d&&d[0].get(0)==a.get(0))return b.splice(c,1),void 0}},i=function(a,b,c){var d,e=null,f=0;return function(){var g=new Date,h=b-(g-f);return c||(c=this),0>=h&&(clearTimeout(e),e=null,f=g,d=a.apply(c,arguments)),d}},j=function(){var b=a(window),c=b.scrollTop();return{top:c,bottom:c+b.height()}};a(window).on("scroll.__lazy",i(f,1e3)),a(window).on("scroll.__lazy",i(c,100)),a.fn.lazy=function(b){return"destroy"===b?this.each(function(){h(a(this))}):(this.each(function(){g(a(this),b)}),a(window).trigger("scroll")),this}}(jQuery);