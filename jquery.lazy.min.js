!function(a){"use strict";var b=[],c=function(){for(var a=m(),c=0;c<b.length;c++)try{var d=b[c],g=d[0],h=d[1],i=g.data("offset.lazy"),j=h.condition(g,i);j&&i.top+g.height()>a.top&&i.top<a.bottom&&(h.once&&k(g),e(d))}catch(l){}f()},d=function(a){for(var c=0;c<b.length;c++){var d=b[c];if(d&&d[0].get(0)==a.get(0)){d[1].once&&k(d[0]),e(d);break}}},e=function(b){var c=b[0],d=b[1];"image"==d.type?!function(a,b){setTimeout(function(){g(a,b)},0)}(c,d):"url"==d.type?!function(a,b){setTimeout(function(){h(a,b)},0)}(c,d):!function(b,c){setTimeout(function(){c.onLoad(c.res,b,c),a(window).trigger("scroll")},0)}(c,d)},f=function(){var a=function(a,c){for(var d=[],e=0;e<b.length;e++)c(b[e],e,b)&&d.push(b[e]);return d};b=a(b,function(a){return!!a})},g=function(b,c){var d=c.res;b.one({"load.__lazy":function(d){c.onLoad(b,c,d),a(this).off(".lazy"),a(window).trigger("scroll")},"error.__lazy":function(d){c.onError(b,c,d),a(this).off(".__lazy"),a(window).trigger("scroll")}});var e=b.get(0);null!=d&&""!=d?(b.attr("src",d),e.complete||4===e.readyState?b.trigger("load"):"uninitialized"===e.readyState&&0===e.src.indexOf("data:")&&b.trigger("error")):b.trigger("error")},h=function(b,c){a.ajax(c.res).done(function(a){c.onLoad(a,b,c)}).fail(function(a){c.onError(a,b,c)}).always(function(){a(window).trigger("scroll")})},i=function(){for(var a=0;a<b.length;a++){var c=b[a];c&&function(a){setTimeout(function(){a[0].data("offset.lazy",a[1].offset(a[0]))},0)}(c)}},j=function(c,d){d||(d={}),a.isFunction(d.offset)||(d.offset=function(a){return a.offset()}),void 0==d.type&&"img"==a("img").get(0).tagName.toLowerCase()&&(d.type="image"),d.condition||(d.condition=function(){return!0}),"image"==d.type&&(d.once=!0,d.res||(d.res=c.data("src"))),a.isFunction(d.res)&&(d.res=d.res(c)),c.data("offset.lazy",d.offset(c)),d.onLoad||(d.onLoad=function(){}),d.onError||(d.onError=function(){}),b.push([c,d])},k=function(a){for(var c=0;c<b.length;c++){var d=b[c];if(d&&d[0].get(0)==a.get(0)){d[0].removeData("offset.lazy"),b[c]=null;break}}},l=function(a,b,c){var d,e=null,f=0;return function(){var g=new Date,h=b-(g-f);return c||(c=this),0>=h&&(clearTimeout(e),e=null,f=g,d=a.apply(c,arguments)),d}},m=function(){var b=a(window),c=b.scrollTop();return{top:c,bottom:c+b.height()}};a(window).on("scroll.__lazy",l(i,1e3)),a(window).on("scroll.__lazy",l(c,100)),a.fn.lazy=function(b){return"destroy"===b?this.each(function(){k(a(this))}):"load"==b?d(a(this)):(this.each(function(){var c=a(this);setTimeout(function(){j(c,b)},0)}),setTimeout(function(){a(window).trigger("scroll")},100)),this}}(jQuery);