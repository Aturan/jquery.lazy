!function(a){"use strict";var b=[],c=function(){for(var c=j(),f=0;f<b.length;f++)try{var g=b[f],h=g[0],i=g[1],k=h.data("offset.lazy");k.top+h.height()>c.top&&k.top<c.bottom&&(h.removeData("offset.lazy"),i.once&&(b[f]=null),"image"==i.type?setTimeout(function(){d(h,i)},0):"url"==i.type?setTimeout(function(){e(h,i)},0):setTimeout(function(){i.onLoad(i.res()),a(window).trigger("scroll.__lazy")},0))}catch(l){}},d=function(b,c){var d=c.res();b.one({load:function(d){c.onLoad(b,c,d),a(window).trigger("scroll.__lazy")},error:function(d){c.onError(b,c,d),a(window).trigger("scroll.__lazy")}});var e=b.get(0);null!=d&&""!=d?(b.attr("src",d),e.complete||4===e.readyState?b.trigger("load"):"uninitialized"===e.readyState&&0===e.src.indexOf("data:")&&b.trigger("error")):b.trigger("error")},e=function(b,c){a.ajax(c.res()).done(function(a){c.onLoad(b,a,c)}).fail(function(a){c.onError(b,a,c)}).always(function(){a(window).trigger("scroll.__lazy")})},f=function(){for(var a=0;a<b.length;a++){var c=b[a];c&&c[0].data("offset.lazy",c[1].offset())}},g=function(c,d){if(d||(d={}),!a.isFunction(d.offset))if(d.offset){var e=d.offset;d.offset=function(){return e}}else d.offset=function(){return c.offset()};if(!a.isFunction(d.res)){var f=d.res;d.res=function(){return f}}c.data("offset.lazy",d.offset()),d.onLoad||(d.onLoad=a.noop),d.onError||(d.onError=a.noop),"image"==d.type&&(d.once=!0),b.push([c,d])},h=function(a){for(var c=0;c<b.length;c++){var d=b[c];d&&d[0].get(0)==a.get(0)&&b.splice(c,1)}},i=function(a,b,c){var d,e=null,f=0;return function(){var g=new Date,h=b-(g-f);return c||(c=this),0>=h&&(clearTimeout(e),e=null,f=g,d=a.apply(c,arguments)),d}},j=function(){var b=a(window),c=b.scrollTop();return{top:c,bottom:c+b.height()}};a(window).on("scroll.__lazy",i(f,1e3)),a(window).on("scroll.__lazy",i(c,100)),a.fn.lazy=function(b){return"destroy"===b?this.each(function(){h(a(this))}):(this.each(function(){g(a(this),b)}),a(window).trigger("scroll.__lazy")),this}}(jQuery);